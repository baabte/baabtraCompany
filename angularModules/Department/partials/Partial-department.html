<script type="text/ng-template" id="nodes_renderer.html">
    <div ui-tree-handle data-nodrag class="tree-node tree-node-content bg-light dk" id="{{node._id}}">
        <span data-nodrag class="m-l">{{node._id}}</span>
        <div class="pull-right m-l">

        	<!-- for add department -->
        	<a href="" class="icon-grey"  data-nodrag ng-click="addNewDepartment(node)" data-placement="left" bs-tooltip data-title="Add a department under this"><i class="ti  ti-layers-alt" ></i>
        	</a>

        	<!-- for edit department-->
        	<a href="" class="icon-grey  m-h-xs" ng-if="node.parent" data-nodrag ng-click="editDepartment(node)" data-placement="left" bs-tooltip data-title="Edit department"><i class="fa fa-edit" ></i>
        	</a>

        	<!-- for remove department  -->
        	<a href="" class="icon-grey m-r-xs" ng-if="node.parent" data-nodrag ng-click="removeDepartment(node)" data-placement="left" bs-tooltip data-title="Remove department"><i class="fa fa-trash-o" ></i>
        	</a>
        </div>
    </div>
    <ol ui-tree-nodes="" ng-model="node.childrenObj" style="padding-left:0px;" ng-class="{hidden: collapsed}" data-horizontal="">
        <li ng-repeat="node in node.childrenObj track by $index" class="text-center" ui-tree-node ng-include="'nodes_renderer.html'">
        </li>
    </ol>
</script>

<div class="row">
	<div class="col-xs-12">
		<div class="panel">
			<div set-sub-heading-and-background-color class="panel-heading font-bold text-white  p baab-shadow">
				Departments under {{$state.params.branchId}}
			</div>
			<div class="panel-body">
				<div class="bg-white text-center">
					<div ng-if="data.departmentsTree" class="row" ui-tree="treeOptions">

						<ol ui-tree-nodes="" ng-model="data.departmentsTree"  data-horizontal="">
	            			<li  ng-repeat="node in data.departmentsTree" class="list-group list-group-gap" ui-tree-node ng-include="'nodes_renderer.html'"></li>
	          			</ol>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

